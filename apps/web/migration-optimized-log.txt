ðŸš€ === MIGRATION OPTIMISÃ‰E phardev â†’ Salines ===

ðŸ“¥ Chargement des mappings...
âœ… 294 catÃ©gories mappÃ©es
âœ… 615 laboratoires mappÃ©s

ðŸ›’ === MIGRATION PRODUITS (OPTIMISÃ‰E) ===

ðŸ“– Chargement produits Salines...
   âœ“ 21283 produits avec EAN13

ðŸ“– Chargement produits phardev...
   âœ“ 26373 produits phardev en mÃ©moire

ðŸ“– Chargement images phardev...
   âœ“ 17944 images en mÃ©moire

ðŸ“– Chargement catÃ©gories produits phardev...
   âœ“ 38548 associations catÃ©gories en mÃ©moire

ðŸš€ Traitement par batch de 100...

ðŸ“¦ Batch 1/213 (100 produits)...
   âœ… 38 mis Ã  jour, 62 non trouvÃ©s, 0 erreurs (0.5%)

ðŸ“¦ Batch 2/213 (100 produits)...
   âœ… 67 mis Ã  jour, 133 non trouvÃ©s, 0 erreurs (0.9%)

ðŸ“¦ Batch 3/213 (100 produits)...
   âœ… 96 mis Ã  jour, 204 non trouvÃ©s, 0 erreurs (1.4%)

ðŸ“¦ Batch 4/213 (100 produits)...
   âœ… 135 mis Ã  jour, 265 non trouvÃ©s, 0 erreurs (1.9%)

ðŸ“¦ Batch 5/213 (100 produits)...
   âœ… 199 mis Ã  jour, 301 non trouvÃ©s, 0 erreurs (2.3%)

ðŸ“¦ Batch 6/213 (100 produits)...
   âœ… 273 mis Ã  jour, 327 non trouvÃ©s, 0 erreurs (2.8%)

ðŸ“¦ Batch 7/213 (100 produits)...
   âœ… 306 mis Ã  jour, 394 non trouvÃ©s, 0 erreurs (3.3%)

ðŸ“¦ Batch 8/213 (100 produits)...
   âœ… 337 mis Ã  jour, 463 non trouvÃ©s, 0 erreurs (3.8%)

ðŸ“¦ Batch 9/213 (100 produits)...
   âœ… 380 mis Ã  jour, 520 non trouvÃ©s, 0 erreurs (4.2%)

ðŸ“¦ Batch 10/213 (100 produits)...
   âœ… 428 mis Ã  jour, 572 non trouvÃ©s, 0 erreurs (4.7%)

ðŸ“¦ Batch 11/213 (100 produits)...
   âœ… 477 mis Ã  jour, 623 non trouvÃ©s, 0 erreurs (5.2%)

ðŸ“¦ Batch 12/213 (100 produits)...
   âœ… 516 mis Ã  jour, 684 non trouvÃ©s, 0 erreurs (5.6%)

ðŸ“¦ Batch 13/213 (100 produits)...
   âœ… 559 mis Ã  jour, 741 non trouvÃ©s, 0 erreurs (6.1%)

ðŸ“¦ Batch 14/213 (100 produits)...
   âœ… 601 mis Ã  jour, 799 non trouvÃ©s, 0 erreurs (6.6%)

ðŸ“¦ Batch 15/213 (100 produits)...
   âœ… 633 mis Ã  jour, 867 non trouvÃ©s, 0 erreurs (7.0%)

ðŸ“¦ Batch 16/213 (100 produits)...
   âœ… 657 mis Ã  jour, 943 non trouvÃ©s, 0 erreurs (7.5%)

ðŸ“¦ Batch 17/213 (100 produits)...
   âœ… 704 mis Ã  jour, 996 non trouvÃ©s, 0 erreurs (8.0%)

ðŸ“¦ Batch 18/213 (100 produits)...
   âœ… 753 mis Ã  jour, 1047 non trouvÃ©s, 0 erreurs (8.5%)

ðŸ“¦ Batch 19/213 (100 produits)...
   âœ… 793 mis Ã  jour, 1107 non trouvÃ©s, 0 erreurs (8.9%)

ðŸ“¦ Batch 20/213 (100 produits)...
   âœ… 825 mis Ã  jour, 1175 non trouvÃ©s, 0 erreurs (9.4%)

ðŸ“¦ Batch 21/213 (100 produits)...
   âœ… 855 mis Ã  jour, 1245 non trouvÃ©s, 0 erreurs (9.9%)

ðŸ“¦ Batch 22/213 (100 produits)...
   âœ… 902 mis Ã  jour, 1298 non trouvÃ©s, 0 erreurs (10.3%)

ðŸ“¦ Batch 23/213 (100 produits)...
   âœ… 925 mis Ã  jour, 1375 non trouvÃ©s, 0 erreurs (10.8%)

ðŸ“¦ Batch 24/213 (100 produits)...
   âœ… 935 mis Ã  jour, 1465 non trouvÃ©s, 0 erreurs (11.3%)

ðŸ“¦ Batch 25/213 (100 produits)...
   âœ… 945 mis Ã  jour, 1555 non trouvÃ©s, 0 erreurs (11.7%)

ðŸ“¦ Batch 26/213 (100 produits)...
   âœ… 959 mis Ã  jour, 1641 non trouvÃ©s, 0 erreurs (12.2%)

ðŸ“¦ Batch 27/213 (100 produits)...
   âœ… 973 mis Ã  jour, 1727 non trouvÃ©s, 0 erreurs (12.7%)

ðŸ“¦ Batch 28/213 (100 produits)...
   âœ… 981 mis Ã  jour, 1819 non trouvÃ©s, 0 erreurs (13.2%)

ðŸ“¦ Batch 29/213 (100 produits)...
   âœ… 988 mis Ã  jour, 1912 non trouvÃ©s, 0 erreurs (13.6%)

ðŸ“¦ Batch 30/213 (100 produits)...
   âœ… 996 mis Ã  jour, 2004 non trouvÃ©s, 0 erreurs (14.1%)

ðŸ“¦ Batch 31/213 (100 produits)...
   âœ… 1000 mis Ã  jour, 2100 non trouvÃ©s, 0 erreurs (14.6%)

ðŸ“¦ Batch 32/213 (100 produits)...
   âŒ Erreur pour Pharmascience Gel Douche Aloe Vera 1l: PrismaClientKnownRequestError: 
Invalid `salines.productCategory.createMany()` invocation in
/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:160:55

  157     .filter(id => id) as string[];
  158 
  159 if (validCategoryIds.length > 0) {
â†’ 160     await salines.productCategory.createMany(
Unique constraint failed on the fields: (`productId`,`categoryId`)
    at ei.handleRequestError (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
    at ei.handleAndLogRequestError (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
    at ei.request (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
    at async a (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
    at async migrateProductsBatch (/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:160:25)
    at async main (/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:207:9) {
  code: 'P2002',
  meta: {
    modelName: 'ProductCategory',
    target: [ 'productId', 'categoryId' ]
  },
  clientVersion: '6.19.0'
}
   âŒ Erreur pour Pharmascience Gel Douche Fraicheur Marine 1L: PrismaClientKnownRequestError: 
Invalid `salines.productCategory.createMany()` invocation in
/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:160:55

  157     .filter(id => id) as string[];
  158 
  159 if (validCategoryIds.length > 0) {
â†’ 160     await salines.productCategory.createMany(
Unique constraint failed on the fields: (`productId`,`categoryId`)
    at ei.handleRequestError (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
    at ei.handleAndLogRequestError (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
    at ei.request (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
    at async a (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
    at async migrateProductsBatch (/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:160:25)
    at async main (/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:207:9) {
  code: 'P2002',
  meta: {
    modelName: 'ProductCategory',
    target: [ 'productId', 'categoryId' ]
  },
  clientVersion: '6.19.0'
}
   âœ… 1007 mis Ã  jour, 2191 non trouvÃ©s, 2 erreurs (15.0%)

ðŸ“¦ Batch 33/213 (100 produits)...
   âœ… 1020 mis Ã  jour, 2278 non trouvÃ©s, 2 erreurs (15.5%)

ðŸ“¦ Batch 34/213 (100 produits)...
   âœ… 1039 mis Ã  jour, 2359 non trouvÃ©s, 2 erreurs (16.0%)

ðŸ“¦ Batch 35/213 (100 produits)...
   âœ… 1058 mis Ã  jour, 2440 non trouvÃ©s, 2 erreurs (16.4%)

ðŸ“¦ Batch 36/213 (100 produits)...
   âœ… 1081 mis Ã  jour, 2517 non trouvÃ©s, 2 erreurs (16.9%)

ðŸ“¦ Batch 37/213 (100 produits)...
   âŒ Erreur pour Herbesan DÃ©fense 30 ComprimÃ©s: PrismaClientKnownRequestError: 
Invalid `salines.productCategory.createMany()` invocation in
/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:160:55

  157     .filter(id => id) as string[];
  158 
  159 if (validCategoryIds.length > 0) {
â†’ 160     await salines.productCategory.createMany(
Unique constraint failed on the fields: (`productId`,`categoryId`)
    at ei.handleRequestError (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
    at ei.handleAndLogRequestError (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
    at ei.request (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
    at async a (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
    at async migrateProductsBatch (/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:160:25)
    at async main (/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:207:9) {
  code: 'P2002',
  meta: {
    modelName: 'ProductCategory',
    target: [ 'productId', 'categoryId' ]
  },
  clientVersion: '6.19.0'
}
   âœ… 1110 mis Ã  jour, 2587 non trouvÃ©s, 3 erreurs (17.4%)

ðŸ“¦ Batch 38/213 (100 produits)...
   âœ… 1118 mis Ã  jour, 2679 non trouvÃ©s, 3 erreurs (17.9%)

ðŸ“¦ Batch 39/213 (100 produits)...
   âœ… 1133 mis Ã  jour, 2764 non trouvÃ©s, 3 erreurs (18.3%)

ðŸ“¦ Batch 40/213 (100 produits)...
   âœ… 1158 mis Ã  jour, 2839 non trouvÃ©s, 3 erreurs (18.8%)

ðŸ“¦ Batch 41/213 (100 produits)...
   âœ… 1176 mis Ã  jour, 2921 non trouvÃ©s, 3 erreurs (19.3%)

ðŸ“¦ Batch 42/213 (100 produits)...
   âœ… 1201 mis Ã  jour, 2996 non trouvÃ©s, 3 erreurs (19.7%)

ðŸ“¦ Batch 43/213 (100 produits)...
   âœ… 1244 mis Ã  jour, 3053 non trouvÃ©s, 3 erreurs (20.2%)

ðŸ“¦ Batch 44/213 (100 produits)...
   âœ… 1303 mis Ã  jour, 3094 non trouvÃ©s, 3 erreurs (20.7%)

ðŸ“¦ Batch 45/213 (100 produits)...
   âœ… 1324 mis Ã  jour, 3173 non trouvÃ©s, 3 erreurs (21.1%)

ðŸ“¦ Batch 46/213 (100 produits)...
   âœ… 1342 mis Ã  jour, 3255 non trouvÃ©s, 3 erreurs (21.6%)

ðŸ“¦ Batch 47/213 (100 produits)...
   âœ… 1369 mis Ã  jour, 3328 non trouvÃ©s, 3 erreurs (22.1%)

ðŸ“¦ Batch 48/213 (100 produits)...
   âœ… 1445 mis Ã  jour, 3352 non trouvÃ©s, 3 erreurs (22.6%)

ðŸ“¦ Batch 49/213 (100 produits)...
   âœ… 1521 mis Ã  jour, 3376 non trouvÃ©s, 3 erreurs (23.0%)

ðŸ“¦ Batch 50/213 (100 produits)...
   âœ… 1551 mis Ã  jour, 3446 non trouvÃ©s, 3 erreurs (23.5%)

ðŸ“¦ Batch 51/213 (100 produits)...
   âœ… 1622 mis Ã  jour, 3475 non trouvÃ©s, 3 erreurs (24.0%)

ðŸ“¦ Batch 52/213 (100 produits)...
   âœ… 1696 mis Ã  jour, 3501 non trouvÃ©s, 3 erreurs (24.4%)

ðŸ“¦ Batch 53/213 (100 produits)...
   âŒ Erreur pour VALEBIO COLLAGENE ARTICULAIRE: PrismaClientKnownRequestError: 
Invalid `salines.productCategory.createMany()` invocation in
/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:160:55

  157     .filter(id => id) as string[];
  158 
  159 if (validCategoryIds.length > 0) {
â†’ 160     await salines.productCategory.createMany(
Unique constraint failed on the fields: (`productId`,`categoryId`)
    at ei.handleRequestError (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
    at ei.handleAndLogRequestError (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
    at ei.request (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
    at async a (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
    at async migrateProductsBatch (/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:160:25)
    at async main (/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:207:9) {
  code: 'P2002',
  meta: {
    modelName: 'ProductCategory',
    target: [ 'productId', 'categoryId' ]
  },
  clientVersion: '6.19.0'
}
   âŒ Erreur pour HERBESAN VISION CPR60: PrismaClientKnownRequestError: 
Invalid `salines.productCategory.createMany()` invocation in
/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:160:55

  157     .filter(id => id) as string[];
  158 
  159 if (validCategoryIds.length > 0) {
â†’ 160     await salines.productCategory.createMany(
Unique constraint failed on the fields: (`productId`,`categoryId`)
    at ei.handleRequestError (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
    at ei.handleAndLogRequestError (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
    at ei.request (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
    at async a (/Users/victorpiamias/Desktop/SalinesBack/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
    at async migrateProductsBatch (/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:160:25)
    at async main (/Users/victorpiamias/Desktop/SalinesBack/apps/web/scripts/migrate-optimized.ts:207:9) {
  code: 'P2002',
  meta: {
    modelName: 'ProductCategory',
    target: [ 'productId', 'categoryId' ]
  },
  clientVersion: '6.19.0'
}
